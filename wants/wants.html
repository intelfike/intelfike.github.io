<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>æ¬²æ±‚ãƒ–ãƒ¬ã‚¹ãƒˆ</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.1.1/dist/css/bootstrap-material-design.min.css" integrity="sha384-wXznGJNEXNG1NFsbm0ugrLFMQPWswR3lds2VeinahP8N0zJw9VWSopbjv2x7WCvX" crossorigin="anonymous">
</head>
<body>
	<div style="text-align:right;">
		<a target="_blank" href="https://docs.google.com/spreadsheets/d/1I0lAJ4OrKXJMJk9Xwupik3zOZpEoPyycrWDInfC07Fo/edit?usp=sharing">ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’é–‹ã</a>
	</div>
	<div id="top_page" class="container" style="padding:50px; text-align:center;">
		<h1>æ¬²æ±‚ãƒ–ãƒ¬ã‚¹ãƒˆ</h1>
		<div class="form-group" style="padding-top:100px;">
			<div class="form-inline justify-content-center">
				<input type="number" id="limit" class="form-control" value="10" max="40" min="0" step="1" style="width:50px;">å€‹ã¾ã§
			</div>
		</div>
		<button class="btn btn-primary" id="random_filter">ãƒ©ãƒ³ãƒ€ãƒ ã«çµã‚Šè¾¼ã‚€</button>
	</div>

	<div id="list_page" class="container" style="display: none;">
		<h1>æ¬²æ±‚ãƒ–ãƒ¬ã‚¹ãƒˆ</h1>
		<p>æ¬²æ±‚ã‚’3ã¤é¸ã‚“ã§ã€Œé€ä¿¡ã€</p>
		<div>
			<div id="want_list" class="list-group"></div>
			<nobr>
				<a class="btn btn-primary w-50" href="">æˆ»ã‚‹</a>
				<a id="sender" class="btn btn-primary w-50 active">é€ä¿¡</a>
			</nobr>
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js" integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U" crossorigin="anonymous"></script>
	<script src="https://unpkg.com/bootstrap-material-design@4.1.1/dist/js/bootstrap-material-design.js" integrity="sha384-CauSuKpEqAFajSpkdjv3z9t8E7RlpJ1UP0lKM/+NdtSarroVKu069AlsRPKkFBz9" crossorigin="anonymous"></script>
	<script>$(document).ready(function() { $('body').bootstrapMaterialDesign(); });</script>
<script>
var wants = ["å®Ÿç¸¾", "å¥½å¥‡å¿ƒ", "åœ°ä½", "ç«¶äº‰", "è²¢çŒ®", "å…±æ„Ÿ", "å­¦ã³", "å¿«æ¥½", "æ”¯é…", "æ‰¿èª", "äº¤æµ", "ç†è§£", "å®¶æ—", "ãŠé‡‘", "ç¬‘", "å¥åº·", "ç¡çœ ", "é£²é£Ÿ", "å®‰å…¨", "æƒ°æ¬²", "é‹å‹•", "åé›†", "æ™‚é–“", "é”æˆ", "å¥åº·", "å¥½å¥‡å¿ƒ", "åœ°ä½", "ç«¶äº‰", "è²¢çŒ®", "è‡ªç«‹", "ãƒ‡ã‚¶ã‚¤ãƒ³", "æ”¯é…", "æ‰¿èª", "äº¤æµ", "å…±æ„Ÿ", "æ‰€å±", "åå…¥", "å¿«æ¥½", "ç¡çœ ", "é£²é£Ÿ", "ç†è§£", "æ„›", "å®‰å…¨", "åé›†", "é‹å‹•", "æ™‚é–“", "ğŸ’©"]

document.body.onload = () => {
	var limit_num = localStorage.getItem('limit')
	if (limit_num == null) {
		limit_num = 10
	}
	limit.value = limit_num
}

random_filter.onclick = () => {
	top_page.style.display = 'none'
	for(let n in wants) {
		let r = Math.floor(Math.random() * wants.length)
		let tmp = wants[n]
		wants[n] = wants[r]
		wants[r] = tmp
	}
	for(let n = 0; n < limit.value; n++) {
		let html = ''
		html += '<label class="form-check list-group-item btn btn-primary waves-effect" style="border:1px solid #009688;">'
		html += '<input type="checkbox" class="" value="'+wants[n]+'">'
		html += '<div>' + wants[n] + '</div>'
		html += '</label>\n'
		// html += '<div class="custom-control custom-checkbox list-group-item btn btn-primary waves-effect" style="border:1px solid #009688;">'
		// html += '<input type="checkbox" class="custom-control-input" id="want_'+n+'" value="'+wants[n]+'">'
		// html += '<label class="custom-control-label" for="want_'+n+'">'+wants[n]+'</label>'
		// html += '</div>'
		want_list.innerHTML += html
		$('input[type="checkbox"]').change(() => {
			$('input[type="checkbox"]').parent().removeClass('active')
			$('input[type="checkbox"]:checked').parent().addClass('active')
		})
	}
	localStorage.setItem('limit', limit.value)
	list_page.style.display = ''
}
sender.onclick = () => {
	// é¸æŠã—ãŸé …ç›®ã‚’å–å¾—
	var checkeds = document.querySelectorAll('input[type="checkbox"]:checked')
	var data = []
	var has_unko = false
	for (let i = 0; i < checkeds.length; i++) {
		let checked = checkeds[i]
		data.push(checked.value)
		if (checked.value == 'ğŸ’©') {
			has_unko = true
		}
	}

	if (has_unko) {
		var r = Math.floor(Math.random() * 3)
		switch(r){
		case 0:
			if (confirm('ğŸ’©ãŒã€€ãŠãã‚ãŒã‚Š\nãªã‹ã¾ã«ã€€ãªã‚ŠãŸãã†ã«ã€€ã“ã¡ã‚‰ã‚’ã¿ã¦ã„ã‚‹ï¼\nãªã‹ã¾ã«ã€€ã—ã¦ã‚ã’ã¾ã™ã‹ï¼Ÿ')) {
				alert('ğŸ’©<ã‚ã‚ŠãŒã¨ã†ï¼ï¼ï¼')
				alert('ğŸ’©ãŒã€€ãªã‹ã¾ã«ã€€ãªã£ãŸ')
			} else {
				alert('ğŸ’©<ã‚¯ã‚½ãŒï¼ï¼ï¼')
				return
			}
			break;
		case 1:
			apply_unko = confirm('ğŸ’©<ã‚‚ã—ã€€ã‚ã—ã®å‘³æ–¹ã«ãªã‚Œã°\nä¸–ç•Œã®åŠåˆ†ã‚’ã€€ãŠã¾ãˆã«ã‚„ã‚ã†')
			really = 'ã»ã‚“ã¨ã†'
			while (apply_unko == false) {
				apply_unko = confirm('ğŸ’©<'+really+'ã«ã€€ãã‚Œã§ã€€ã‚ˆã„ã®ã‹ï¼Ÿ\nã‚‚ã†ä¸€åº¦å•ãŠã†ã€€ã‚ã—ã®ã€€å‘³æ–¹ã«ãªã‚‰ãªã„ã‹ï¼Ÿ')
				really += 'ã®ã»ã‚“ã¨ã†'
			} 
			alert('ğŸ’©<...!')
			alert('ğŸ’©ãŒã€€ãªã‹ã¾ã«ã€€ãªã£ãŸ')
			break;
		case 2:
			if (confirm('ğŸ’©<ã‚ªãƒ¬ã¯ã“ã‚Œã¾ã§ãšã£ã¨ä¸€äººã§æˆ¦ã£ã¦ããŸã€‚ã ãŒã€ãŠå‰ã¨ãªã‚‰...\nğŸ’©ã‚’ä»²é–“ã«ã—ã¾ã™ã‹ï¼Ÿ')) {
				alert('ğŸ’©<ä¸æ€è­°ãªãã‚‚ã¡ã ')
				alert('ğŸ’©ãŒã€€ãªã‹ã¾ã«ã€€ãªã£ãŸ')
			} else {
				alert('ğŸ’©<ã‚¯ã‚½ãŒï¼ï¼ï¼')
				return
			}
			break;
		}
	}

	if (data.length == 0) {
		alert('1ã¤ä»¥ä¸Šé¸æŠã—ã¦ãã ã•ã„')
		return
	}

	var xhr = new XMLHttpRequest()
	xhr.open('POST', 'https://script.google.com/macros/s/AKfycbwOMfK3wLaIyOghRr0OaqnBJXvg3RxHC3FsKXlQSdD3Q_f0IXEj/exec')
	xhr.onloadend = () => {location.reload()}
	xhr.send(JSON.stringify(data))
}

</script>
</body>
</html>